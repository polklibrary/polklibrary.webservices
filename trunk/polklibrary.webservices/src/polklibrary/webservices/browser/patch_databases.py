from plone import api
from plone.memoize import ram
from Products.Five import BrowserView
from plone.app.textfield.value import RichTextValue
from plone.protect.interfaces import IDisableCSRFProtection
from zope.interface import alsoProvides

import json

class WSView(BrowserView):

    _data = {
       'pass' : [],
       'fail' : [],
    }
    
    db_url = "https://polk.uwosh.edu/guides/resource/"
    db_data = [{"id":2,"url":"https://www.remote.uwosh.edu/login?url=https://www.jstor.org/site/19th-century-british-pamphlets/"},{"id":3,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=a9h"},{"id":4,"url":"https://www.remote.uwosh.edu/login?url=https://search.alexanderstreet.com/avon"},{"id":5,"url":"https://www.remote.uwosh.edu/login?url=https://infoweb.newsbank.com/apps/news/easy-search?p=AWNB"},{"id":6,"url":"http://www.accessible.com.www.remote.uwosh.edu/accessible/"},{"id":7,"url":"https://www.remote.uwosh.edu/login?url=https://aamr.alexanderstreet.com"},{"id":8,"url":"https://www.remote.uwosh.edu/login?url=https://infoweb.newsbank.com/?db=EANX&d_collections=EANAAA"},{"id":9,"url":"https://www.remote.uwosh.edu/login?url=https://infoweb.newsbank.com/?db=EAPX"},{"id":10,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=l0h"},{"id":11,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=awh"},{"id":12,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=31h"},{"id":13,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=h9h"},{"id":14,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=h9i"},{"id":15,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=h9j"},{"id":16,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=h9k"},{"id":17,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=h9m"},{"id":18,"url":"https://www.remote.uwosh.edu/login?url=https://pubs.acs.org/about.html"},{"id":19,"url":"https://www.remote.uwosh.edu/login?url=https://search.alexanderstreet.com/ahiv"},{"id":20,"url":"https://www.remote.uwosh.edu/login?url=https://ancestrylibrary.proquest.com"},{"id":21,"url":"https://www.remote.uwosh.edu/login?url=https://www.wiscat.net/ext/validateglobal.php?cid=stwi&lid=stwi&dataid=1601"},{"id":22,"url":"https://www.remote.uwosh.edu/login?url=https://infotrac.gale.com/itweb/oshkosh?db=AHSI"},{"id":23,"url":"https://www.remote.uwosh.edu/login?url=https://www.webofscience.com/wos/woscc/search-with-editions?editions=WOS.AHCI"},{"id":24,"url":"https://www.remote.uwosh.edu/login?url=https://library.artstor.org"},{"id":25,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=rfh"},{"id":26,"url":"https://primo.getty.edu/primo-explore/search?vid=BHA"},{"id":27,"url":"https://www.remote.uwosh.edu/login?url=http://isiknowledge.com/bioabs"},{"id":28,"url":"https://www.remote.uwosh.edu/login?url=https://solomon.bldr.alexanderstreet.com"},{"id":29,"url":"https://www.remote.uwosh.edu/login?url=https://infoweb.newsbank.com/apps/news/?p=AAHX"},{"id":30,"url":"https://www.remote.uwosh.edu/login?url=https://search.alexanderstreet.com/blsv"},{"id":31,"url":"https://www.remote.uwosh.edu/login?url=https://www.brill.com"},{"id":32,"url":"https://www.remote.uwosh.edu/login?url=https://bwld.alexanderstreet.com"},{"id":33,"url":"https://www.remote.uwosh.edu/login?url=https://gdc.galegroup.com/gdc/artemis?fromProdId=BNCN&p=BNCN&u=oshkosh"},{"id":34,"url":"https://www.bjs.gov/"},{"id":35,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=buh"},{"id":36,"url":"https://catalog.gpo.gov/F"},{"id":37,"url":"https://www.remote.uwosh.edu/login?url=https://enterprise.clcd.com"},{"id":38,"url":"https://www.remote.uwosh.edu/login?url=https://www.chronicle.com"},{"id":39,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=rzh"},{"id":40,"url":"https://www.remote.uwosh.edu/login?url=https://www.clinicalkey.com/"},{"id":41,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=cgh"},{"id":42,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?defaultdb=chh&profile=ehost"},{"id":43,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=cmr"},{"id":44,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=ufh"},{"id":45,"url":"https://wac.colostate.edu/comppile/"},{"id":46,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=iih"},{"id":47,"url":"https://www.remote.uwosh.edu/login?url=https://library.cqpress.com/cqresearcher/"},{"id":48,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=i3h"},{"id":49,"url":"https://www.remote.uwosh.edu/login?url=https://dataplanet.sagepub.com/"},{"id":50,"url":"https://www.remote.uwosh.edu/login?url=https://www.daredictionary.com/"},{"id":51,"url":"https://www.thedaln.org/"},{"id":52,"url":"https://www.remote.uwosh.edu/login?url=https://solomon.tcpt.alexanderstreet.com/"},{"id":53,"url":"https://www.remote.uwosh.edu/login?url=https://solomon.dlcr.alexanderstreet.com/"},{"id":54,"url":"https://www.doaj.org/"},{"id":55,"url":"https://docuseek2.com/uwosh"},{"id":56,"url":"https://www.remote.uwosh.edu/login?url=https://dsm.psychiatryonline.org/doi/book/10.1176/appi.books.9780890425596"},{"id":57,"url":"https://www.remote.uwosh.edu/login?url=https://infoweb.newsbank.com/?db=EANX"},{"id":58,"url":"https://www.remote.uwosh.edu/login?url=https://eena.alexanderstreet.com"},{"id":59,"url":"https://www.remote.uwosh.edu/login?url=https://search.proquest.com/legacyredirect/eebo"},{"id":60,"url":"https://www.remote.uwosh.edu/login?url=https://ebookcentral.proquest.com/lib/uwoshkosh-ebooks"},{"id":61,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb"},{"id":62,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=nlebk"},{"id":63,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=ecn"},{"id":64,"url":"https://www.remote.uwosh.edu/login?url=https://infotrac.galegroup.com/itweb/oshkosh?db=ECON"},{"id":65,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=ehh"},{"id":66,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=20h"},{"id":67,"url":"https://www.remote.uwosh.edu/login?url=https://gdc.galegroup.com/gdc/artemis?fromProdId=ECCO&p=ECCO&u=wisc_madison"},{"id":68,"url":"https://www.wiscat.net/ext/validateglobal.php?cid=stwi&lid=stwi&dataid=451"},{"id":69,"url":"https://www.wiscat.net/ext/validateglobal.php?cid=stwi&lid=stwi&dataid=32"},{"id":70,"url":"https://www.wiscat.net/ext/validateglobal.php?cid=stwi&lid=stwi&dataid=452"},{"id":71,"url":"https://www.remote.uwosh.edu/login?url=http://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=eih"},{"id":72,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=eric"},{"id":73,"url":"https://www.remote.uwosh.edu/login?url=https://search.proquest.com/ethnicnewswatch/advanced"},{"id":74,"url":"https://www.remote.uwosh.edu/login?url=https://search.alexanderstreet.com/anth"},{"id":75,"url":"https://www.remote.uwosh.edu/login?url=http://apps.brepolis.net/LTool/Entrance.aspx?w=7"},{"id":76,"url":"https://www.remote.uwosh.edu/login?url=https://www.wiscat.net/ext/validateglobal.php?cid=stwi&lid=stwi&dataid=1967"},{"id":77,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=f3h"},{"id":78,"url":"https://www.remote.uwosh.edu/login?url=https://search.alexanderstreet.com/flon"},{"id":79,"url":"https://www.remote.uwosh.edu/login?url=https://fod.infobase.com/PortalPlaylists.aspx?cid=1639&aid=3068"},{"id":80,"url":"http://www.wifoundations.org/"},{"id":81,"url":"https://www.remote.uwosh.edu/login?url=https://infotrac.galegroup.com/itweb/oshkosh?db=LCO"},{"id":82,"url":"https://www.remote.uwosh.edu/login?url=https://infotrac.galegroup.com/itweb/oshkosh?db=DVNW"},{"id":83,"url":"https://www.remote.uwosh.edu/login?url=https://go.galegroup.com/ps/start.do?p=GDCS&u=oshkosh"},{"id":84,"url":"https://www.remote.uwosh.edu/login?url=https://go.galegroup.com/ps/start.do?prodId=GVRL"},{"id":85,"url":"https://www.remote.uwosh.edu/login?url=https://glnd.alexanderstreet.com"},{"id":86,"url":"https://www.remote.uwosh.edu/login?url=https://search.proquest.com/genderwatch/advanced"},{"id":87,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=geh"},{"id":88,"url":"https://www.remote.uwosh.edu/login?url=https://www.proquest.com/gerritsen"},{"id":89,"url":"https://www.remote.uwosh.edu/login?url=https://asp6new.alexanderstreet.com/gild"},{"id":90,"url":"https://www.remote.uwosh.edu/login?url=https://plants.jstor.org/"},{"id":91,"url":"https://www.remote.uwosh.edu/login?url=http://scholar.google.com"},{"id":92,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=8gh%20"},{"id":93,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=hch"},{"id":94,"url":"https://www.remote.uwosh.edu/login?url=https://heinonline.org/HOL/Welcome"},{"id":95,"url":"https://www.wiscat.net/ext/validateglobal.php?cid=stwi&lid=stwi&dataid=308"},{"id":96,"url":"https://lcweb2.loc.gov/cocoon/ihas/html/volcano/volcano-home.html"},{"id":97,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=hia"},{"id":98,"url":"https://www.remote.uwosh.edu/login?url=https://search.proquest.com/hnpnewyorktimes/advanced?"},{"id":99,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=hrc"},{"id":100,"url":"https://www.remote.uwosh.edu/login?url=https://search.proquest.com/hooverscompany/advanced"},{"id":101,"url":"https://www.remote.uwosh.edu/login?url=https://www.mergentonline.com/Hoovers"},{"id":102,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=hlh"},{"id":103,"url":"https://www.remote.uwosh.edu/login?url=https://iopscience.iop.org/journalList"},{"id":104,"url":"https://www.remote.uwosh.edu/login?url=http://apps.brepolis.net/LTool/EntranceSteward.aspx?w=5"},{"id":105,"url":"https://www.remote.uwosh.edu/login?url=https://www.jstor.org/search"},{"id":106,"url":"https://uwosh.kanopystreaming.com/"},{"id":107,"url":"https://www.remote.uwosh.edu/login?url=https://li.proquest.com/legislativeinsight"},{"id":108,"url":"https://www.remote.uwosh.edu/login?url=http://apps.brepolis.net/LTool/Entrance.aspx?w=4"},{"id":109,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=qth"},{"id":110,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=lih"},{"id":111,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=lkh"},{"id":112,"url":"https://www.oscars.org/library/index.html"},{"id":113,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=mat"},{"id":114,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=f6h"},{"id":115,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=msn"},{"id":116,"url":"https://www.remote.uwosh.edu/login?url=https://www.ams.org/mathscinet/"},{"id":117,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=mnh"},{"id":118,"url":"https://www.remote.uwosh.edu/login?url=https://www.mergentarchives.com"},{"id":119,"url":"https://www.remote.uwosh.edu/login?url=https://www.mergentonline.com"},{"id":120,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=fxh"},{"id":121,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=mih"},{"id":122,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=mth"},{"id":123,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=kah"},{"id":124,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=mzh"},{"id":125,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=mah"},{"id":126,"url":"https://www.remote.uwosh.edu/login?url=https://search.alexanderstreet.com/shmu"},{"id":127,"url":"https://www.ncjrs.gov/App/AbstractDB/AbstractDBSearch.aspx"},{"id":128,"url":"https://www.remote.uwosh.edu/login?url=https://search.alexanderstreet.com/nath"},{"id":129,"url":"https://www.remote.uwosh.edu/login?url=https://www.nature.com/nature/"},{"id":130,"url":"https://www.remote.uwosh.edu/login?url=https://www.nejm.org/"},{"id":131,"url":"https://www.remote.uwosh.edu/login?url=https://search.proquest.com/hnpnewyorktimes/advanced"},{"id":132,"url":"https://www.remote.uwosh.edu/login?url=https://access.newspaperarchive.com"},{"id":133,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=n5h"},{"id":134,"url":"https://www.remote.uwosh.edu/login?url=https://www.wiscat.net/ext/validateglobal.php?cid=stwi&lid=stwi&dataid=2175"},{"id":135,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=nsm"},{"id":136,"url":"https://www.remote.uwosh.edu/login?url=https://go.galegroup.com/ps/start.do?p=NCCO&userGroupName=oshkosh"},{"id":137,"url":"https://www.remote.uwosh.edu/login?url=https://infotrac.galegroup.com/itweb/oshkosh?db=NCNP"},{"id":138,"url":"https://www.remote.uwosh.edu/login?url=https://solomon.imld.alexanderstreet.com/"},{"id":139,"url":"https://www.remote.uwosh.edu/login?url=https://solomon.nwld.alexanderstreet.com"},{"id":140,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=novelist"},{"id":141,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=novelistk8"},{"id":142,"url":"https://www.remote.uwosh.edu/login?url=https://search.alexanderstreet.com/nmhv"},{"id":143,"url":"https://www.remote.uwosh.edu/login?url=https://ovidsp.ovid.com/ovidweb.cgi?T=JS&NEWS=n&PAGE=main&D=yrovft"},{"id":144,"url":"https://www.remote.uwosh.edu/login?url=https://www.oecd-ilibrary.org/"},{"id":145,"url":"https://www.remote.uwosh.edu/login?url=https://link.gale.com/apps/OVIC?u=oshkosh"},{"id":146,"url":"https://www.remote.uwosh.edu/login?url=https://www.oxfordaasc.com"},{"id":147,"url":"https://www.remote.uwosh.edu/login?url=https://www.oed.com/"},{"id":148,"url":"https://www.remote.uwosh.edu/login?url=https://www.oxfordmusiconline.com/"},{"id":149,"url":"https://www.remote.uwosh.edu/login?url=https://search.alexanderstreet.com/pbsv"},{"id":150,"url":"https://www.remote.uwosh.edu/login?url=https://search.proquest.com/philosophersindex/advanced"},{"id":151,"url":"https://www.remote.uwosh.edu/login?url=https://search.proquest.com/pilots?accountid=9355"},{"id":152,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=poh"},{"id":153,"url":"https://pqdtopen.proquest.com/search.html"},{"id":154,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=prh"},{"id":155,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=tfh"},{"id":156,"url":"https://www.remote.uwosh.edu/login?url=https://muse.jhu.edu/browse"},{"id":157,"url":"https://www.remote.uwosh.edu/login?url=https://search.proquest.com/congressional"},{"id":158,"url":"https://www.remote.uwosh.edu/login?url=https://www.proquest.com/pq1business?accountid=9355"},{"id":159,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=pdh"},{"id":160,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=psyh"},{"id":161,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=21h"},{"id":162,"url":"https://journals.plos.org/plosbiology/"},{"id":163,"url":"https://www.remote.uwosh.edu/login?url=https://www.ncbi.nlm.nih.gov/pubmed/advanced"},{"id":164,"url":"https://www.remote.uwosh.edu/login?url=https://www.reaxys.com"},{"id":165,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=bwh"},{"id":166,"url":"https://www.remote.uwosh.edu/login?url=https://www.webofscience.com/wos/woscc/search-with-editions?editions=WOS.SCI"},{"id":167,"url":"https://www.remote.uwosh.edu/login?url=https://science.sciencemag.org"},{"id":168,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=sch"},{"id":169,"url":"https://www.remote.uwosh.edu/login?url=https://www.sciencedirect.com"},{"id":170,"url":"https://library.uwosh.edu/collections/scifinder-special-access-research-database"},{"id":171,"url":"https://www.remote.uwosh.edu/login?url=https://asp6new.alexanderstreet.com/swrp"},{"id":172,"url":"https://www.remote.uwosh.edu/login?url=https://go.galegroup.com/ps/start.do?p=BBCN&u=oshkosh"},{"id":173,"url":"https://www.remote.uwosh.edu/login?url=https://www.webofscience.com/wos/woscc/search-with-editions?editions=WOS.SSCI"},{"id":174,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=sih"},{"id":175,"url":"https://www.remote.uwosh.edu/login?url=https://infotrac.galegroup.com/itweb/oshkosh?db=SATA"},{"id":176,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=juh,s3h"},{"id":177,"url":"https://www.remote.uwosh.edu/login?url=https://link.springer.com/search?facet-content-type=%22Journal%22&showAll=false"},{"id":178,"url":"https://plato.stanford.edu/contents.html"},{"id":179,"url":"https://www.remote.uwosh.edu/login?url=https://statabs.proquest.com/sa/index.html"},{"id":180,"url":"https://www.remote.uwosh.edu/login?url=https://www.jstor.org/site/struggles-for-freedom/southern-africa/"},{"id":181,"url":"https://www.remote.uwosh.edu/login?url=https://www.arabidopsis.org"},{"id":182,"url":"https://www.remote.uwosh.edu/login?url=https://www.tandfonline.com/"},{"id":183,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.asp?profile=web&defaultdb=trh"},{"id":184,"url":"https://www.remote.uwosh.edu/login?url=https://www.wiscat.net/ext/validateglobal.php?cid=stwi&lid=stwi&dataid=800"},{"id":185,"url":"https://www.remote.uwosh.edu/login?url=https://infotrac.galegroup.com/itweb/oshkosh?db=TTDA"},{"id":186,"url":"https://www.nlm.nih.gov/databases/download/toxlinesubset.html"},{"id":187,"url":"https://www.remote.uwosh.edu/login?url=https://asp6new.alexanderstreet.com/adli/"},{"id":188,"url":"https://www.remote.uwosh.edu/login?url=https://www.wiscat.net/ext/validateglobal.php?cid=stwi&lid=stwi&dataid=2131"},{"id":189,"url":"https://www.remote.uwosh.edu/login?url=https://www.uptodate.com/contents/search?unid=^u&srcsys=EZPX286249"},{"id":190,"url":"https://archives.uwosh.edu/"},{"id":191,"url":"https://minds.wisconsin.edu/handle/1793/30714"},{"id":192,"url":"https://www.remote.uwosh.edu/login?url=https://www.veryshortintroductions.com/"},{"id":193,"url":"https://wac.colostate.edu/books/"},{"id":194,"url":"https://partner.wsj.com/partner/universityofwisconsinoshkosh"},{"id":195,"url":"https://www.remote.uwosh.edu/login?url=https://www.webofscience.com/wos/woscc/basic-search"},{"id":196,"url":"https://www.remote.uwosh.edu/login?url=https://1.next.westlaw.com/Search/Home.html?rs=IWLN1.0&vr=3.0&sp=000031860-2100&forcecdn=false&bhskip=1"},{"id":197,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=fzh"},{"id":198,"url":"https://www.remote.uwosh.edu/login?url=https://onlinelibrary.wiley.com/"},{"id":199,"url":"https://www.wiscat.net/home?cid=stwi&lid=stwi"},{"id":200,"url":"https://www.remote.uwosh.edu/login?url=https://search.alexanderstreet.com/wass"},{"id":201,"url":"https://www.remote.uwosh.edu/login?url=https://search.ebscohost.com/login.aspx?authtype=ip,uid&profile=ehost&defaultdb=fyh"},{"id":202,"url":"https://www.cia.gov/the-world-factbook/"},{"id":203,"url":"https://www.remote.uwosh.edu/login?url=https://www.jstor.org/site/heritage/africa/"},{"id":204,"url":"https://www.worldcat.org/advancedsearch"},{"id":205,"url":"http://www.bea.gov/"},{"id":206,"url":"http://www.bls.gov/"},{"id":207,"url":"https://www.census.gov/economic-indicators/"}]
    
    
    #@ram.cache(lambda *args: time() // (60 * 10))
    def __call__(self):
        self._data = {
           'pass' : [],
           'fail' : [],
        }
        
        dbs = {}
        for item in self.db_data:
            dbs[item["url"]] = item["id"]
        self.process(dbs)
        
        self.request.response.setHeader('Content-Type','application/json')
        self.request.response.setHeader('Access-Control-Allow-Origin','*')
        if self.request.form.get('alt','') == 'jsonp':
            return self.request.form.get('callback','?') + '(' + json.dumps(self._data) + ')'
        return json.dumps(self._data)

        
    def process(self, dbs):
        alsoProvides(self.request, IDisableCSRFProtection)
        brains = api.content.find(portal_type='polklibrary.type.rdb.models.database')
        
        for brain in brains:
            obj = brain.getObject()
            if brain.getRemoteUrl in dbs:
                id = dbs[brain.getRemoteUrl]
                print(brain.getRemoteUrl + " -> " + str(id))
                print("Found")
                newurl = self.db_url + str(id)
                print(obj.getRemoteUrl + ' switching... ' + newurl)
                obj.getRemoteUrl = newurl
                obj.reindexObject()
                self._data['pass'].append(brain.getURL())
            else:
                self._data['fail'].append(brain.getURL())
                
        
    @property
    def portal(self):
        return api.portal.get()
        